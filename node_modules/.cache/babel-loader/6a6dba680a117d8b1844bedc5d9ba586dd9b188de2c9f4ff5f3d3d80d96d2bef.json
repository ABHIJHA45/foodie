{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jabhi/OneDrive/Desktop/PROJECTS/FOODIE/foodie/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"C:/Users/jabhi/OneDrive/Desktop/PROJECTS/FOODIE/foodie/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"C:/Users/jabhi/OneDrive/Desktop/PROJECTS/FOODIE/foodie/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/jabhi/OneDrive/Desktop/PROJECTS/FOODIE/foodie/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef}from\"react\";import{useDispatchCart,useCart}from\"./ContextReducer\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){var dispatch=useDispatchCart();var data=useCart();var priceRef=useRef();var options=props.options;var priceOptions=Object.keys(options);var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),size=_useState4[0],setSize=_useState4[1];// let foodItem = props.foodItems;\nvar handleAddToCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var food,_iterator,_step,item;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:food=[];_iterator=_createForOfIteratorHelper(data);_context.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context.next=11;break;}item=_step.value;if(!(item.id===props.foodItem._id)){_context.next=9;break;}food=item;return _context.abrupt(\"break\",11);case 9:_context.next=4;break;case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);_iterator.e(_context.t0);case 16:_context.prev=16;_iterator.f();return _context.finish(16);case 19:if(!(food!==[])){_context.next=31;break;}if(!(food.size===size)){_context.next=26;break;}_context.next=23;return dispatch({type:\"UPDATE\",id:props.foodItem._id,price:finalPrice,qty:qty});case 23:return _context.abrupt(\"return\");case 26:if(!(food.size!==size)){_context.next=30;break;}_context.next=29;return dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,price:finalPrice,qty:qty,size:size// img: props.ImgSrc,\n});case 29:return _context.abrupt(\"return\");case 30:return _context.abrupt(\"return\");case 31:_context.next=33;return dispatch({type:\"ADD\",id:props.foodItem._id,name:props.foodItem.name,price:finalPrice,qty:qty,size:size});case 33:console.log(data);case 34:case\"end\":return _context.stop();}},_callee,null,[[2,13,16,19]]);}));return function handleAddToCart(){return _ref.apply(this,arguments);};}();var finalPrice=qty*parseInt(options[size]);useEffect(function(){setSize(priceRef.current.value);},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",style:{width:\"16rem\",maxHeight:\"360px\"// justifyContent: \"center\",\n},children:[/*#__PURE__*/_jsx(\"img\",{src:props.foodItem.img,className:\"card-img-top\",alt:\"  \",style:{height:\"120px\",objectFit:\"fill\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body bg-dark text-light rounded \",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.foodItem.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"container w-100 d-flex \",style:{justifyContent:\"center\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100  bg-success rounded\",onChange:function onChange(e){return setQty(e.target.value);},children:Array.from(Array(6),function(e,i){return/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1);})}),/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 bg-success rounded \"// style={{ display: \"flex\" }}\n,ref:priceRef,onChange:function onChange(e){return setSize(e.target.value);},children:priceOptions.map(function(data){return/*#__PURE__*/_jsx(\"option\",{value:data,children:data},data);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-inline h-100 fs-5\",children:[\" Rs.\",finalPrice,\"/- \"]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger justify-center ms-2\",onClick:handleAddToCart,children:\"Add to Cart\"})]})]})})});}","map":{"version":3,"names":["React","useEffect","useRef","useDispatchCart","useCart","useState","jsx","_jsx","jsxs","_jsxs","Card","props","dispatch","data","priceRef","options","priceOptions","Object","keys","_useState","_useState2","_slicedToArray","qty","setQty","_useState3","_useState4","size","setSize","handleAddToCart","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","food","_iterator","_step","item","wrap","_callee$","_context","prev","next","_createForOfIteratorHelper","s","n","done","value","id","foodItem","_id","abrupt","t0","e","f","finish","type","price","finalPrice","name","console","log","stop","apply","arguments","parseInt","current","children","className","style","width","maxHeight","src","img","alt","height","objectFit","justifyContent","alignItems","onChange","target","Array","from","i","ref","map","onClick"],"sources":["C:/Users/jabhi/OneDrive/Desktop/PROJECTS/FOODIE/foodie/src/components/Card.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport { useDispatchCart, useCart } from \"./ContextReducer\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function Card(props) {\r\n  let dispatch = useDispatchCart();\r\n  let data = useCart();\r\n  const priceRef = useRef();\r\n  let options = props.options;\r\n  let priceOptions = Object.keys(options);\r\n  const [qty, setQty] = useState(1);\r\n  const [size, setSize] = useState(\"\");\r\n\r\n  // let foodItem = props.foodItems;\r\n  const handleAddToCart = async () => {\r\n    let food = [];\r\n    for (const item of data) {\r\n      if (item.id === props.foodItem._id) {\r\n        food = item;\r\n\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (food !== []) {\r\n      if (food.size === size) {\r\n        await dispatch({\r\n          type: \"UPDATE\",\r\n          id: props.foodItem._id,\r\n          price: finalPrice,\r\n          qty: qty,\r\n        });\r\n        return;\r\n      } else if (food.size !== size) {\r\n        await dispatch({\r\n          type: \"ADD\",\r\n          id: props.foodItem._id,\r\n          name: props.foodItem.name,\r\n          price: finalPrice,\r\n          qty: qty,\r\n          size: size,\r\n          // img: props.ImgSrc,\r\n        });\r\n        // console.log(\"Size different so simply ADD one more to the list\");\r\n        return;\r\n      }\r\n      return;\r\n    }\r\n\r\n    await dispatch({\r\n      type: \"ADD\",\r\n      id: props.foodItem._id,\r\n      name: props.foodItem.name,\r\n      price: finalPrice,\r\n      qty: qty,\r\n      size: size,\r\n    });\r\n    console.log(data);\r\n  };\r\n  let finalPrice = qty * parseInt(options[size]);\r\n  useEffect(() => {\r\n    setSize(priceRef.current.value);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <div\r\n          className=\"card mt-3\"\r\n          style={{\r\n            width: \"16rem\",\r\n            maxHeight: \"360px\",\r\n            // justifyContent: \"center\",\r\n          }}\r\n        >\r\n          <img\r\n            src={props.foodItem.img}\r\n            className=\"card-img-top\"\r\n            alt=\"  \"\r\n            style={{ height: \"120px\", objectFit: \"fill\" }}\r\n          />\r\n          <div className=\"card-body bg-dark text-light rounded \">\r\n            <h5 className=\"card-title\">{props.foodItem.name}</h5>\r\n            {/* <p className=\"card-text\">Some quick example text to b</p> */}\r\n            <div\r\n              className=\"container w-100 d-flex \"\r\n              style={{ justifyContent: \"center\", alignItems: \"center\" }}\r\n            >\r\n              <select\r\n                className=\"m-2 h-100  bg-success rounded\"\r\n                onChange={(e) => setQty(e.target.value)}\r\n              >\r\n                {Array.from(Array(6), (e, i) => {\r\n                  return (\r\n                    <option key={i + 1} value={i + 1}>\r\n                      {i + 1}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n              <select\r\n                className=\"m-2 h-100 bg-success rounded \"\r\n                // style={{ display: \"flex\" }}\r\n                ref={priceRef}\r\n                onChange={(e) => setSize(e.target.value)}\r\n              >\r\n                {priceOptions.map((data) => {\r\n                  return (\r\n                    <option key={data} value={data}>\r\n                      {data}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n              <div className=\"d-inline h-100 fs-5\"> Rs.{finalPrice}/- </div>\r\n            </div>\r\n            <hr />\r\n\r\n            <button\r\n              className={`btn btn-danger justify-center ms-2`}\r\n              onClick={handleAddToCart}\r\n            >\r\n              Add to Cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}